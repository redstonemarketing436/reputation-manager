(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42691,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return d.findSourceMapURL}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(92283),d=e.r(45603),i=e.r(59700)},92643,e=>{"use strict";let t=(0,e.i(94024).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],92643)},43665,e=>{"use strict";let t=(0,e.i(94024).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],43665)},11455,16535,322,e=>{"use strict";var t=e.i(50134),r=e.i(42219),a=e.i(42691);let s=(0,a.createServerReference)("60596dbb169363e32c5ea7a2f42430c3210ed8cd00",a.callServer,void 0,a.findSourceMapURL,"generateResponseAction"),l=(0,a.createServerReference)("403c9512468308b59e23fb61340d2a375aec2ea4e6",a.callServer,void 0,a.findSourceMapURL,"analyzeReviewAction"),d=(0,a.createServerReference)("703c22cf4c14be109c68bd7fa08880cadadb15dd79",a.callServer,void 0,a.findSourceMapURL,"replyToReviewAction");var i=e.i(92643),n=e.i(94024);let c=(0,n.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);var o=e.i(43665);let x=(0,n.default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),p=(0,n.default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),h=(0,n.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function b({review:e,onReplied:a}){let[n,b]=(0,r.useState)(!1),[u,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[k,N]=(0,r.useState)(null),S=async()=>{v(!0);try{let t=await s(e.content,e.author);g(t)}catch(e){console.error("AI drafting failed",e)}finally{v(!1)}},R=async()=>{j(!0);try{let t=await l(e.content);N(t)}catch(e){console.error("AI analysis failed",e)}finally{j(!1)}},A=async()=>{if(u.trim()){y(!0);try{await d(e.propertyId,e.id,u),b(!1),g(""),a()}catch(e){console.error("Failed to reply",e),alert("Failed to post reply. Please try again.")}finally{y(!1)}}};return(0,t.jsxs)("div",{className:"bg-redstone-card p-10 rounded-none border border-redstone-card/50 transition-all hover:border-redstone-red/30",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-none bg-redstone-bg flex items-center justify-center text-gray-500 border border-gray-700/30",children:(0,t.jsx)(o.User,{className:"w-6 h-6 stroke-[1.5px]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white text-lg tracking-tight",children:e.author}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:(0,t.jsx)("span",{children:new Date(e.date).toLocaleDateString()})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(r=>(0,t.jsx)(i.Star,{className:`w-4 h-4 ${r<=e.rating?"fill-yellow-500 text-yellow-500":"text-gray-700"}`},r))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-none text-[10px] uppercase tracking-widest font-bold border
                            ${"PENDING"===e.status?"bg-yellow-900/20 text-yellow-500 border-yellow-900/30":""}
                            ${"Replied"===e.status?"bg-green-900/20 text-green-500 border-green-900/30":""}
                            ${"Flagged"===e.status?"bg-red-900/20 text-red-500 border-red-900/30":""}
                        `,children:e.status}),k||e.category?(0,t.jsxs)("div",{className:`flex items-center gap-2 px-2 py-0.5 rounded-none text-[10px] uppercase tracking-widest font-bold border
                                ${k?.isActionable||e.isActionable?"bg-red-900/20 text-red-500 border-red-900/30":"bg-gray-800 text-gray-400 border-gray-700"}
                            `,children:[(0,t.jsx)(p,{className:"w-3 h-3"}),k?.category||e.category,(k?.isActionable||e.isActionable)&&(0,t.jsx)(h,{className:"w-3 h-3 ml-1"})]}):(0,t.jsx)("button",{onClick:R,disabled:w,className:"text-[10px] uppercase tracking-widest font-bold text-gray-500 hover:text-white transition-colors disabled:opacity-50",children:w?"Analyzing...":"Analyze"})]})]})]}),(0,t.jsx)("p",{className:"text-gray-300 leading-relaxed mb-8 text-base",children:e.content}),"Replied"===e.status?(0,t.jsxs)("div",{className:"bg-green-900/10 border border-green-900/20 rounded-none p-6 flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-green-900/20 p-2 rounded-none text-green-500",children:(0,t.jsx)(c,{className:"w-5 h-5 stroke-[1.5px]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-bold text-green-500 uppercase tracking-wider",children:"Replied"}),(0,t.jsx)("p",{className:"text-sm text-green-500/80 mt-1",children:"Response posted to Google."})]})]}):(0,t.jsx)("div",{children:n?(0,t.jsxs)("div",{className:"bg-redstone-bg p-6 rounded-none border border-redstone-card/50 animate-in fade-in slide-in-from-top-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("label",{htmlFor:`reply-${e.id}`,className:"block text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Your Response"}),(0,t.jsxs)("button",{onClick:S,disabled:m,className:"flex items-center gap-2 text-xs font-bold text-white bg-redstone-red hover:bg-red-700 px-4 py-2 rounded-none transition-colors uppercase tracking-wider",children:[(0,t.jsx)(x,{className:"w-3 h-3"}),m?"Drafting...":"Draft with AI"]})]}),(0,t.jsx)("textarea",{id:`reply-${e.id}`,rows:4,className:"w-full p-4 bg-redstone-card border border-gray-700 focus:border-redstone-red outline-none text-sm text-gray-200 mb-4 rounded-none transition-colors",placeholder:"Write a response to this review...",value:u,onChange:e=>g(e.target.value),disabled:f||m}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,t.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-xs font-bold text-gray-400 hover:text-white transition-colors uppercase tracking-wider",disabled:f,children:"Cancel"}),(0,t.jsx)("button",{onClick:A,disabled:!u.trim()||f,className:"px-6 py-2 text-xs font-bold text-white bg-redstone-red hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 uppercase tracking-wider",children:f?"Posting...":"Post Reply"})]})]}):(0,t.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 text-redstone-red hover:text-red-500 font-bold text-xs transition-colors uppercase tracking-widest",children:[(0,t.jsx)(c,{className:"w-4 h-4 stroke-[2px]"}),"Reply to Review"]})})]})}e.s(["AlertTriangle",()=>h],16535),e.s(["ReviewCard",()=>b],11455);let u=(0,n.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>u],322)},25424,e=>{"use strict";var t=e.i(50134),r=e.i(42219),a=e.i(57329),s=e.i(37605),l=e.i(42691);let d=(0,l.createServerReference)("60e9232d34c5baff19ca8da26b6ae1295c4c0ca86e",l.callServer,void 0,l.findSourceMapURL,"getReviewsAction"),i=(0,l.createServerReference)("00b2861b8e63fc650f66400823a8241803bc1d5820",l.callServer,void 0,l.findSourceMapURL,"triggerAiAuditAction");var n=e.i(11455),c=e.i(94024);let o=(0,c.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),x=(0,c.default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var p=e.i(322);function h(){let{selectedPropertyId:e}=(0,a.usePropertyFilter)(),{user:l}=(0,s.useAuth)(),[c,h]=(0,r.useState)([]),[b,u]=(0,r.useState)(!0),[g,f]=(0,r.useState)(!1),y=async()=>{u(!0);try{let t=await d(e,l);h(t)}catch(e){console.error("Failed to fetch reviews",e),h([])}finally{u(!1)}},m=async()=>{f(!0);try{let e=await i();console.log("AI Audit Complete:",e),await y()}catch(e){console.error("Audit failed",e)}finally{f(!1)}};return(0,r.useEffect)(()=>{l&&y()},[e,l]),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Review Feed"}),(0,t.jsx)("p",{className:"text-gray-400 mt-2 text-sm italic",children:"Manage and respond to customer reviews from Google Business Profile."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:m,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-xs font-bold text-redstone-red bg-redstone-red/10 border border-redstone-red/20 hover:bg-redstone-red/20 transition-all rounded-none uppercase tracking-widest disabled:opacity-50",title:"Run AI categorization on all un-analyzed reviews",children:[(0,t.jsx)(p.Sparkles,{className:`w-3.5 h-3.5 ${g?"animate-pulse":""}`}),g?"Auditing...":"AI Audit"]}),(0,t.jsxs)("button",{onClick:y,disabled:b,className:"flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-white border border-gray-700 hover:border-white px-4 py-2 transition-all uppercase tracking-widest",children:[(0,t.jsx)(x,{className:`w-3.5 h-3.5 ${b?"animate-spin":""}`}),"Refresh Feed"]})]})]}),(0,t.jsx)("div",{className:"space-y-8 pb-20",children:b?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 bg-redstone-card/30 border border-redstone-card/50",children:[(0,t.jsx)(o,{className:"w-10 h-10 text-redstone-red animate-spin mb-6 stroke-[1.5px]"}),(0,t.jsx)("p",{className:"text-gray-500 uppercase tracking-widest text-[10px] font-bold",children:"Synchronizing with Google..."})]}):0===c.length?(0,t.jsx)("div",{className:"text-center py-32 bg-redstone-card/30 border border-redstone-card/50",children:(0,t.jsx)("p",{className:"text-gray-500 uppercase tracking-widest text-[10px] font-bold",children:"No reviews found for this property."})}):c.map(e=>(0,t.jsx)(n.ReviewCard,{review:e,onReplied:y},e.id))})]})}e.s(["default",()=>h],25424)}]);