module.exports=[55500,a=>{"use strict";var b=a.i(28967),c=a.i(87275),d=a.i(77321),e=a.i(81015),f=a.i(61945),g=a.i(47145);function h(){let{selectedPropertyId:a}=(0,c.usePropertyFilter)(),{user:h}=(0,d.useAuth)(),[i,j]=(0,g.useState)([]),[k,l]=(0,g.useState)(!0);return(0,g.useEffect)(()=>{(async()=>{if(h){l(!0);try{let b=[...await e.GoogleBusinessService.getReviews(a,h)].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime());j(b)}catch(a){console.error("Failed to fetch reviews",a),j([])}finally{l(!1)}}})()},[a,h]),(0,b.jsxs)("div",{className:"space-y-12",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-[0.3em] italic",children:"Intelligence Feed"}),(0,b.jsx)("div",{className:"h-[1px] flex-1 mx-8 bg-gray-900"}),(0,b.jsx)("button",{className:"text-[10px] font-bold text-gray-400 hover:text-white uppercase tracking-widest transition-colors",children:"View Archive â€º"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-10",children:k?(0,b.jsxs)("div",{className:"bg-redstone-card/10 p-20 text-center animate-pulse border border-gray-900 flex flex-col items-center justify-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-1 bg-gray-800"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest",children:"Synchronizing Intelligence"})]}):0===i.length?(0,b.jsxs)("div",{className:"bg-redstone-card/10 p-20 text-center text-gray-600 border border-gray-900 uppercase tracking-widest text-[10px] font-bold flex flex-col items-center gap-4",children:[(0,b.jsx)("p",{children:"No reviews found - add one manually"}),(0,b.jsx)("div",{className:"w-12 h-[1px] bg-redstone-red/40"})]}):i.map(a=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-[1px] h-full bg-gray-800 group-hover:bg-redstone-red transition-colors"}),(0,b.jsx)(f.ReviewCard,{review:a,onReplied:()=>{}})]},a.id))})]})}var i=a.i(49158),j=a.i(22608),k=a.i(5210);let l=(0,k.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var m=a.i(90360);function n(){let{selectedPropertyId:a}=(0,c.usePropertyFilter)(),{user:f}=(0,d.useAuth)(),[h,k]=(0,g.useState)([]);(0,g.useEffect)(()=>{(async()=>{if(f)try{let b=await e.GoogleBusinessService.getReviews(a,f);k(b)}catch(a){console.error(a)}})()},[a,f]);let n=(0,g.useMemo)(()=>{let a=h.length,b=a>0?(h.reduce((a,b)=>a+b.rating,0)/a).toFixed(1):"0.0",c=a>0?Math.round(h.filter(a=>a.rating>=4).length/a*100):0,d=h.filter(a=>"Replied"===a.status).length,e=a>0?Math.round(d/a*100):100;return[{label:"Total Reviews",value:a.toString(),sub:"+5.2% vs prev period",icon:l},{label:"Average Rating",value:b,sub:"Portfolio Benchmark: 4.2",icon:i.Star,highlight:!0},{label:"Sentiment Index",value:`${c}%`,sub:"Positive sentiment weight",icon:j.TrendingUp},{label:"Response Rate",value:`${e}%`,sub:100===e?"All locations compliant":`${d}/${a} reviews replied`,icon:m.Activity}]},[h]);return(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((a,c)=>(0,b.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-8 shadow-xl relative group hover:border-redstone-red/40 transition-all duration-500",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-[0.3em] group-hover:text-gray-300 transition-colors",children:a.label}),(0,b.jsx)(a.icon,{className:`w-4 h-4 ${a.highlight?"text-yellow-500":"text-gray-700"} group-hover:text-redstone-red transition-colors`})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:`text-4xl font-bold tracking-tighter ${a.highlight?"text-yellow-500 shadow-yellow-500/10 shadow-sm":"text-white"}`,children:a.value}),(0,b.jsx)("p",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest italic",children:a.sub})]})]},c))})}var o=a.i(57056);let p=(0,k.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var q=a.i(17992),r=a.i(34226),s=a.i(10415);let t={Maintenance:p,Staff:l,Cleanliness:q.Sparkles,Amenities:q.Sparkles,Other:r.MessageSquare};function u(){let{selectedPropertyId:a}=(0,c.usePropertyFilter)(),{user:f}=(0,d.useAuth)(),[h,i]=(0,g.useState)([]),[j,k]=(0,g.useState)(!0);(0,g.useEffect)(()=>{(async()=>{if(f)try{let b=(await e.GoogleBusinessService.getReviews(a,f)).filter(a=>a.isActionable);i(b)}catch(a){console.error("Failed to load insights",a)}finally{k(!1)}})()},[a,f]);let l=(0,g.useMemo)(()=>{let a={};return h.forEach(b=>{let c=b.category||"Other";a[c]||(a[c]=[]),a[c].push(b)}),a},[h]);return j?(0,b.jsx)("div",{className:"animate-pulse h-96 bg-redstone-card/10 border border-gray-900"}):0===h.length?(0,b.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-12 text-center flex flex-col items-center justify-center min-h-[400px]",children:[(0,b.jsx)(q.Sparkles,{className:"w-8 h-8 text-gray-800 mb-6 stroke-[1px]"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-[0.3em]",children:"No Critical Actions Identified"})]}):(0,b.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-10 h-full",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 mb-12",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-redstone-red/10 border border-redstone-red/20 text-redstone-red flex items-center justify-center",children:(0,b.jsx)(o.AlertTriangle,{className:"w-6 h-6 stroke-[1.5px]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight italic uppercase",children:"Priority Intelligence"}),(0,b.jsx)("p",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest mt-1",children:"High-impact issues requiring immediate address"})]}),(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[10px] font-mono text-redstone-red font-bold",children:h.length}),(0,b.jsx)("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest leading-none",children:"Total"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(l).map(([a,c])=>{let d=t[a]||r.MessageSquare;return(0,b.jsxs)("div",{className:"border border-gray-900 bg-redstone-bg/40 flex flex-col",children:[(0,b.jsxs)("div",{className:"bg-redstone-bg px-6 py-4 border-b border-gray-900 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d,{className:"w-4 h-4 text-redstone-red stroke-[1.5px]"}),(0,b.jsx)("h3",{className:"font-bold text-white text-[10px] uppercase tracking-[0.2em]",children:a})]}),(0,b.jsxs)("span",{className:"text-[9px] font-mono text-gray-400",children:["0",c.length]})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-900 flex-1",children:c.slice(0,2).map(a=>(0,b.jsxs)("div",{className:"p-6 hover:bg-white/5 transition-all group cursor-pointer relative",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(s.ChevronRight,{className:"w-4 h-4 text-redstone-red"})}),(0,b.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,b.jsx)("p",{className:"text-[10px] font-bold text-white tracking-widest uppercase",children:a.author})}),(0,b.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2 leading-relaxed font-light font-sans group-hover:text-gray-300 transition-colors",children:a.content})]},a.id))})]},a)})})]})}let v=(0,k.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),w=(0,k.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),x=(0,k.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function y(){let a,{selectedPropertyId:d}=(0,c.usePropertyFilter)(),[e,f]=(0,g.useState)(!1),h="ALL"===d?"":(a=process.env.NEXT_PUBLIC_APP_URL||"https://reputation.redstonemarketing.com",`${a}/survey?propertyId=${d}&t=${Date.now()}`),i=async()=>{if(h)try{await navigator.clipboard.writeText(h),f(!0),setTimeout(()=>f(!1),2e3)}catch(a){console.error("Failed to copy",a)}};return(0,b.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-10 flex flex-col justify-center h-full relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-redstone-red/5 -rotate-45 translate-x-12 -translate-y-12"}),(0,b.jsxs)("div",{className:"flex items-center gap-6 mb-10",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-redstone-red/10 border border-redstone-red/20 text-redstone-red flex items-center justify-center",children:(0,b.jsx)(v,{className:"w-6 h-6 stroke-[1.5px]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white tracking-tight italic uppercase",children:"Survey Acquisition"}),(0,b.jsx)("p",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest mt-1",children:"Direct feedback collection channel"})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-10 leading-relaxed font-light",children:"Deploy this unique acquisition URL to residents. Feedback is automatically processed and categorized by Gemini to generate actionable intelligence."}),(0,b.jsxs)("div",{className:"flex items-center gap-4 bg-redstone-bg/60 border border-gray-900 p-5 group/box hover:border-redstone-red/30 transition-colors",children:[(0,b.jsx)("code",{className:"text-[10px] text-gray-400 truncate flex-1 font-mono tracking-tighter",children:"ALL"===d?"Awaiting Property Selection":h}),(0,b.jsx)("button",{onClick:i,disabled:"ALL"===d,className:"p-3 bg-redstone-bg border border-gray-800 hover:border-redstone-red hover:text-white transition-all text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed group-hover/box:shadow-[0_0_15px_rgba(186,0,24,0.1)]",title:"Copy Link",children:e?(0,b.jsx)(x,{className:"w-4 h-4 text-green-500"}):(0,b.jsx)(w,{className:"w-4 h-4"})})]})]})}let z=(0,k.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),A=(0,k.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var B=a.i(30351);let C=(0,B.createServerReference)("00f0372c0227422aa7470bb9bf1feec23a1d09c96c",B.callServer,void 0,B.findSourceMapURL,"syncGbpReviewsAction");function D(){let{user:a}=(0,d.useAuth)(),c=a?.role==="ADMIN",[e,f]=(0,g.useState)(!1),i=async()=>{f(!0);try{let a=await C();console.log("Sync result:",a),window.location.reload()}catch(a){console.error("Failed to sync reviews:",a),alert("Communication failure with Google Business API. Ensure your account is connected in Settings.")}finally{f(!1)}};return(0,b.jsxs)("div",{className:"max-w-[1600px] mx-auto space-y-12",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8 mb-16",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-5xl font-bold text-white tracking-tighter uppercase italic leading-none mb-4",children:"Portfolio Intelligence"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-[0.4em] italic opacity-70",children:"Real-time reputation management & sentiment analysis"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-6",children:[c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:i,disabled:e,className:"h-14 px-8 text-[10px] font-bold text-gray-400 border border-gray-800 hover:border-redstone-red hover:text-white transition-all rounded-none uppercase tracking-[0.2em] flex items-center gap-3 group disabled:opacity-50",children:[(0,b.jsx)(A,{className:`w-4 h-4 text-redstone-red group-hover:scale-125 transition-transform ${e?"animate-spin":""}`}),e?"Synchronizing Intelligence...":"Refresh Intelligence"]}),(0,b.jsxs)("button",{className:"h-14 px-8 text-[10px] font-bold text-gray-400 border border-gray-800 hover:border-redstone-red hover:text-white transition-all rounded-none uppercase tracking-[0.2em] flex items-center gap-3 group",children:[(0,b.jsx)(z,{className:"w-4 h-4 text-redstone-red group-hover:scale-125 transition-transform"}),"Add Property"]})]}),(0,b.jsxs)("button",{className:"h-14 px-8 text-[10px] font-bold text-white bg-redstone-red hover:bg-red-700 transition-all rounded-none shadow-lg shadow-redstone-red/10 flex items-center gap-4 uppercase tracking-[0.2em] group",children:["Export Intelligence",(0,b.jsx)(s.ChevronRight,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8 mb-16",children:[(0,b.jsx)("div",{className:"xl:col-span-12",children:(0,b.jsx)(n,{})}),(0,b.jsx)("div",{className:"xl:col-span-8 flex flex-col",children:(0,b.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-1 flex-1 relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-redstone-red/30"}),(0,b.jsx)(u,{})]})}),(0,b.jsx)("div",{className:"xl:col-span-4 flex flex-col",children:(0,b.jsxs)("div",{className:"bg-[#1a353b] border border-gray-800 p-1 flex-1 relative group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-redstone-red/20"}),(0,b.jsx)(y,{})]})})]}),(0,b.jsxs)("div",{className:"relative pt-16 border-t border-gray-900",children:[(0,b.jsx)("div",{className:"absolute -top-[1px] left-0 w-24 h-[1px] bg-redstone-red shadow-[0_0_10px_rgba(186,0,24,0.5)]"}),(0,b.jsx)(h,{})]})]})}a.s(["default",()=>D],55500)}];

//# sourceMappingURL=Desktop_reputation-manager_reputation-manager_src_app_page_tsx_e91f3edc._.js.map