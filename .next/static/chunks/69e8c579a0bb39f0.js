(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43665,e=>{"use strict";let t=(0,e.i(94024).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],43665)},92643,e=>{"use strict";let t=(0,e.i(94024).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],92643)},42691,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={callServer:function(){return l.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(92283),i=e.r(45603),n=e.r(59700)},47954,91983,e=>{"use strict";var t=e.i(94024);let r=(0,t.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>r],47954);let s=(0,t.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>s],91983)},10920,e=>{"use strict";var t=e.i(50134),r=e.i(57329),s=e.i(37605),a=e.i(94861),l=e.i(11455),i=e.i(42219);function n(){let{selectedPropertyId:e}=(0,r.usePropertyFilter)(),{user:n}=(0,s.useAuth)(),[o,c]=(0,i.useState)([]),[d,x]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{if(n){x(!0);try{let t=[...await a.GoogleBusinessService.getReviews(e,n)].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());c(t)}catch(e){console.error("Failed to fetch reviews",e),c([])}finally{x(!1)}}})()},[e,n]),(0,t.jsxs)("div",{className:"space-y-12",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-[0.3em] italic",children:"Intelligence Feed"}),(0,t.jsx)("div",{className:"h-[1px] flex-1 mx-8 bg-gray-900"}),(0,t.jsx)("button",{className:"text-[10px] font-bold text-gray-400 hover:text-white uppercase tracking-widest transition-colors",children:"View Archive â€º"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-10",children:d?(0,t.jsxs)("div",{className:"bg-redstone-card/10 p-20 text-center animate-pulse border border-gray-900 flex flex-col items-center justify-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-1 bg-gray-800"}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest",children:"Synchronizing Intelligence"})]}):0===o.length?(0,t.jsxs)("div",{className:"bg-redstone-card/10 p-20 text-center text-gray-600 border border-gray-900 uppercase tracking-widest text-[10px] font-bold flex flex-col items-center gap-4",children:[(0,t.jsx)("p",{children:"No reviews found - add one manually"}),(0,t.jsx)("div",{className:"w-12 h-[1px] bg-redstone-red/40"})]}):o.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-[1px] h-full bg-gray-800 group-hover:bg-redstone-red transition-colors"}),(0,t.jsx)(l.ReviewCard,{review:e,onReplied:()=>{}})]},e.id))})]})}var o=e.i(92643),c=e.i(47954),d=e.i(94024);let x=(0,d.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var h=e.i(91983);function p(){let{selectedPropertyId:e}=(0,r.usePropertyFilter)(),{user:l}=(0,s.useAuth)(),[n,d]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{if(l)try{let t=await a.GoogleBusinessService.getReviews(e,l);d(t)}catch(e){console.error(e)}})()},[e,l]);let p=(0,i.useMemo)(()=>{let e=n.length,t=e>0?(n.reduce((e,t)=>e+t.rating,0)/e).toFixed(1):"0.0",r=e>0?Math.round(n.filter(e=>e.rating>=4).length/e*100):0,s=n.filter(e=>"Replied"===e.status).length,a=e>0?Math.round(s/e*100):100;return[{label:"Total Reviews",value:e.toString(),sub:"+5.2% vs prev period",icon:x},{label:"Average Rating",value:t,sub:"Portfolio Benchmark: 4.2",icon:o.Star,highlight:!0},{label:"Sentiment Index",value:`${r}%`,sub:"Positive sentiment weight",icon:c.TrendingUp},{label:"Response Rate",value:`${a}%`,sub:100===a?"All locations compliant":`${s}/${e} reviews replied`,icon:h.Activity}]},[n]);return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:p.map((e,r)=>(0,t.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-8 shadow-xl relative group hover:border-redstone-red/40 transition-all duration-500",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-[0.3em] group-hover:text-gray-300 transition-colors",children:e.label}),(0,t.jsx)(e.icon,{className:`w-4 h-4 ${e.highlight?"text-yellow-500":"text-gray-700"} group-hover:text-redstone-red transition-colors`})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:`text-4xl font-bold tracking-tighter ${e.highlight?"text-yellow-500 shadow-yellow-500/10 shadow-sm":"text-white"}`,children:e.value}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest italic",children:e.sub})]})]},r))})}var g=e.i(16535);let u=(0,d.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var m=e.i(322),b=e.i(92771),f=e.i(60869);let v={Maintenance:u,Staff:x,Cleanliness:m.Sparkles,Amenities:m.Sparkles,Other:b.MessageSquare};function y(){let{selectedPropertyId:e}=(0,r.usePropertyFilter)(),{user:l}=(0,s.useAuth)(),[n,o]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{if(l)try{let t=(await a.GoogleBusinessService.getReviews(e,l)).filter(e=>e.isActionable);o(t)}catch(e){console.error("Failed to load insights",e)}finally{d(!1)}})()},[e,l]);let x=(0,i.useMemo)(()=>{let e={};return n.forEach(t=>{let r=t.category||"Other";e[r]||(e[r]=[]),e[r].push(t)}),e},[n]);return c?(0,t.jsx)("div",{className:"animate-pulse h-96 bg-redstone-card/10 border border-gray-900"}):0===n.length?(0,t.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-12 text-center flex flex-col items-center justify-center min-h-[400px]",children:[(0,t.jsx)(m.Sparkles,{className:"w-8 h-8 text-gray-800 mb-6 stroke-[1px]"}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-[0.3em]",children:"No Critical Actions Identified"})]}):(0,t.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-10 h-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-12",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-redstone-red/10 border border-redstone-red/20 text-redstone-red flex items-center justify-center",children:(0,t.jsx)(g.AlertTriangle,{className:"w-6 h-6 stroke-[1.5px]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight italic uppercase",children:"Priority Intelligence"}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest mt-1",children:"High-impact issues requiring immediate address"})]}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[10px] font-mono text-redstone-red font-bold",children:n.length}),(0,t.jsx)("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest leading-none",children:"Total"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(x).map(([e,r])=>{let s=v[e]||b.MessageSquare;return(0,t.jsxs)("div",{className:"border border-gray-900 bg-redstone-bg/40 flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-redstone-bg px-6 py-4 border-b border-gray-900 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{className:"w-4 h-4 text-redstone-red stroke-[1.5px]"}),(0,t.jsx)("h3",{className:"font-bold text-white text-[10px] uppercase tracking-[0.2em]",children:e})]}),(0,t.jsxs)("span",{className:"text-[9px] font-mono text-gray-400",children:["0",r.length]})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-900 flex-1",children:r.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"p-6 hover:bg-white/5 transition-all group cursor-pointer relative",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(f.ChevronRight,{className:"w-4 h-4 text-redstone-red"})}),(0,t.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,t.jsx)("p",{className:"text-[10px] font-bold text-white tracking-widest uppercase",children:e.author})}),(0,t.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2 leading-relaxed font-light font-sans group-hover:text-gray-300 transition-colors",children:e.content})]},e.id))})]},e)})})]})}let j=(0,d.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),w=(0,d.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),N=(0,d.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var k=e.i(87398);function S(){let e,{selectedPropertyId:s}=(0,r.usePropertyFilter)(),[a,l]=(0,i.useState)(!1),n="ALL"===s?"":(e=k.default.env.NEXT_PUBLIC_APP_URL||"https://reputation.redstonemarketing.com",`${e}/survey?propertyId=${s}&t=${Date.now()}`),o=async()=>{if(n)try{await navigator.clipboard.writeText(n),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){console.error("Failed to copy",e)}};return(0,t.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-10 flex flex-col justify-center h-full relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-redstone-red/5 -rotate-45 translate-x-12 -translate-y-12"}),(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-10",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-redstone-red/10 border border-redstone-red/20 text-redstone-red flex items-center justify-center",children:(0,t.jsx)(j,{className:"w-6 h-6 stroke-[1.5px]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white tracking-tight italic uppercase",children:"Survey Acquisition"}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest mt-1",children:"Direct feedback collection channel"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-10 leading-relaxed font-light",children:"Deploy this unique acquisition URL to residents. Feedback is automatically processed and categorized by Gemini to generate actionable intelligence."}),(0,t.jsxs)("div",{className:"flex items-center gap-4 bg-redstone-bg/60 border border-gray-900 p-5 group/box hover:border-redstone-red/30 transition-colors",children:[(0,t.jsx)("code",{className:"text-[10px] text-gray-400 truncate flex-1 font-mono tracking-tighter",children:"ALL"===s?"Awaiting Property Selection":n}),(0,t.jsx)("button",{onClick:o,disabled:"ALL"===s,className:"p-3 bg-redstone-bg border border-gray-800 hover:border-redstone-red hover:text-white transition-all text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed group-hover/box:shadow-[0_0_15px_rgba(186,0,24,0.1)]",title:"Copy Link",children:a?(0,t.jsx)(N,{className:"w-4 h-4 text-green-500"}):(0,t.jsx)(w,{className:"w-4 h-4"})})]})]})}let M=(0,d.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),A=(0,d.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var R=e.i(42691);let L=(0,R.createServerReference)("00f0372c0227422aa7470bb9bf1feec23a1d09c96c",R.callServer,void 0,R.findSourceMapURL,"syncGbpReviewsAction");function P(){let{user:e}=(0,s.useAuth)(),r=e?.role==="ADMIN",[a,l]=(0,i.useState)(!1),o=async()=>{l(!0);try{let e=await L();console.log("Sync result:",e),window.location.reload()}catch(e){console.error("Failed to sync reviews:",e),alert("Communication failure with Google Business API. Ensure your account is connected in Settings.")}finally{l(!1)}};return(0,t.jsxs)("div",{className:"max-w-[1600px] mx-auto space-y-12",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8 mb-16",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-5xl font-bold text-white tracking-tighter uppercase italic leading-none mb-4",children:"Portfolio Intelligence"}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-[0.4em] italic opacity-70",children:"Real-time reputation management & sentiment analysis"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-6",children:[r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:o,disabled:a,className:"h-14 px-8 text-[10px] font-bold text-gray-400 border border-gray-800 hover:border-redstone-red hover:text-white transition-all rounded-none uppercase tracking-[0.2em] flex items-center gap-3 group disabled:opacity-50",children:[(0,t.jsx)(A,{className:`w-4 h-4 text-redstone-red group-hover:scale-125 transition-transform ${a?"animate-spin":""}`}),a?"Synchronizing Intelligence...":"Refresh Intelligence"]}),(0,t.jsxs)("button",{className:"h-14 px-8 text-[10px] font-bold text-gray-400 border border-gray-800 hover:border-redstone-red hover:text-white transition-all rounded-none uppercase tracking-[0.2em] flex items-center gap-3 group",children:[(0,t.jsx)(M,{className:"w-4 h-4 text-redstone-red group-hover:scale-125 transition-transform"}),"Add Property"]})]}),(0,t.jsxs)("button",{className:"h-14 px-8 text-[10px] font-bold text-white bg-redstone-red hover:bg-red-700 transition-all rounded-none shadow-lg shadow-redstone-red/10 flex items-center gap-4 uppercase tracking-[0.2em] group",children:["Export Intelligence",(0,t.jsx)(f.ChevronRight,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8 mb-16",children:[(0,t.jsx)("div",{className:"xl:col-span-12",children:(0,t.jsx)(p,{})}),(0,t.jsx)("div",{className:"xl:col-span-8 flex flex-col",children:(0,t.jsxs)("div",{className:"bg-redstone-card border border-redstone-card/50 p-1 flex-1 relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-redstone-red/30"}),(0,t.jsx)(y,{})]})}),(0,t.jsx)("div",{className:"xl:col-span-4 flex flex-col",children:(0,t.jsxs)("div",{className:"bg-[#1a353b] border border-gray-800 p-1 flex-1 relative group",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-redstone-red/20"}),(0,t.jsx)(S,{})]})})]}),(0,t.jsxs)("div",{className:"relative pt-16 border-t border-gray-900",children:[(0,t.jsx)("div",{className:"absolute -top-[1px] left-0 w-24 h-[1px] bg-redstone-red shadow-[0_0_10px_rgba(186,0,24,0.5)]"}),(0,t.jsx)(n,{})]})]})}e.s(["default",()=>P],10920)}]);